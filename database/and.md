---
icon: grid-dividers
---

# 파티셔닝 & 샤딩

## Q. 파티셔닝과 샤딩이란 무엇인가요?

**A.**\
파티셔닝과 샤딩은 대용량 데이터베이스를 효율적으로 관리하고 성능을 최적화하기 위한 데이터 분할 기술입니다.

* **파티셔닝**\
  단일 데이터베이스 내에서 테이블을 더 작은 조각(파티션)으로 나누는 방식입니다. \
  각 파티션은 독립적으로 관리되며, 특정 기준(예: 범위, 해시, 리스트)에 따라 데이터를 분산합니다. \
  예를 들어, 날짜 범위 파티셔닝에서는 `2020-01-01~2020-06-30` 데이터를 한 파티션에, \
  `2020-07-01~2020-12-31` 데이터를 다른 파티션에 저장합니다.
* **샤딩**\
  데이터베이스를 여러 서버에 분산 저장하는 방식입니다. \
  각 샤드는 전체 데이터의 일부를 독립적으로 처리하며, 수평적 확장을 통해 대규모 트래픽을 지원합니다. \
  예를 들어, 사용자 데이터를 샤딩하면 샤드 1은 `A-M` 사용자, 샤드 2는 `N-Z` 사용자를 저장할 수 있습니다.

파티셔닝은 단일 서버 내 관리 효율성을 높이고, 샤딩은 다중 서버로 확장성을 강화합니다.

## Q. 파티셔닝을 사용했을 때의 장단점은 무엇인가요?

**A.**\
파티셔닝은 데이터베이스 관리와 성능을 개선하지만, 몇 가지 트레이드오프가 있습니다.

* **장점**:
  * **관리 용이성**: 파티션 단위로 데이터를 관리해 백업, 복구, 삭제 작업이 효율적입니다.
  * **쿼리 성능 향상**: 특정 파티션만 스캔해 쿼리 속도가 빨라집니다(예: 날짜 범위 쿼리).
  * **유지보수 효율성**: 파티션별 아카이빙이나 인덱스 관리로 유지보수 부담 감소.
* **단점**:
  * **설계 복잡성**: 적절한 파티션 키(예: 날짜, 지역) 선택과 파티션 크기 설정이 어려울 수 있습니다.
  * **성능 저하 위험**: 잘못된 파티션 키나 불균형한 데이터 분포는 성능 저하를 초래할 수 있습니다.
  * **조인 비용**: 파티션 간 조인 시 추가 연산으로 쿼리 성능이 떨어질 수 있습니다.

파티셔닝은 데이터 관리 효율성을 높이지만, 설계 단계에서 신중한 계획이 필요합니다.

## Q. 샤딩을 사용했을 때의 장단점은 무엇인가요?

**A.**\
샤딩은 대규모 트래픽 처리에 유리하지만, 복잡성과 관리 부담이 따릅니다.

* **장점**:
  * **수평 확장성**: 서버를 추가해 부하를 분산하며 트래픽 처리량을 증가시킵니다.
  * **장애 격리**: 특정 샤드에 문제가 발생해도 다른 샤드에 영향을 최소화합니다.
  * **성능 향상**: 각 샤드가 독립적으로 데이터를 처리해 읽기/쓰기 성능 개선.
* **단점**:
  * **설계 복잡성**: 샤드 키 선택(예: 사용자 ID, 지역)과 데이터 분포 균형 유지가 어렵습니다.
  * **조인 어려움**: 여러 샤드에 걸친 조인은 애플리케이션 레벨에서 처리해야 하며 성능 저하 가능.
  * **일관성 관리**: 분산 데이터의 일관성을 유지하려면 추가 로직(예: 분산 트랜잭션)이 필요합니다.
  * **운영 비용**: 샤드별 서버 관리로 인프라 및 운영 리소스 증가.

샤딩은 확장성이 필요한 대규모 시스템(예: 소셜 미디어)에 적합하지만, 복잡한 구현을 감수해야 합니다.

## Q. 파티셔닝, 샤딩과 외래키의 차이점은 무엇인가요?

**A.**\
파티셔닝과 샤딩은 데이터베이스 성능과 확장성을 위해 데이터를 물리적으로 분할하는 기술이며, \
외래키는 데이터 무결성을 보장하는 논리적 제약 조건입니다.

* **파티셔닝**\
  단일 데이터베이스 내 테이블을 논리적/물리적 조각으로 나눠 관리 효율성과 쿼리 성능을 개선. \
  외래키와 독립적으로 동작하며, 파티션 내에서 외래키 제약을 유지할 수 있습니다.
* **샤딩** \
  데이터를 여러 서버에 분산해 수평 확장성을 제공. 외래키는 샤드 간 참조를 어렵게 하므로, \
  샤딩 환경에서는 외래키 사용을 최소화하거나 애플리케이션 레벨에서 관리합니다.
* **외래키**\
  테이블 간 관계를 정의해 참조 무결성을 보장(예: 주문 테이블의 고객 ID가 고객 테이블에 존재해야 함). \
  성능에는 직접 영향을 주지 않지만, 삽입/삭제 시 무결성 검사로 약간의 오버헤드 발생.
* **차이점 요약**:
  * **목적**: 파티셔닝과 샤딩은 성능과 확장성, 외래키는 데이터 무결성에 초점.
  * **적용 범위**: 파티셔닝은 단일 서버, 샤딩은 다중 서버, 외래키는 테이블 간 관계.
  * **상호작용**: 파티셔닝은 외래키와 호환 가능하지만, 샤딩은 외래키 사용을 제한할 수 있음.

따라서, 파티셔닝과 샤딩은 대규모 데이터 관리에, 외래키는 데이터 일관성 유지에 주로 사용됩니다.

## Q. 파티셔닝과 샤딩을 선택할 때 어떤 기준을 고려해야 하나요?

**A.**\
파티셔닝과 샤딩 선택은 시스템 요구사항과 인프라 환경에 따라 달라집니다.

* **파티셔닝 선택 기준**:
  * 단일 서버로 충분한 경우(예: 트래픽이 중간 규모).
  * 데이터 관리 효율성(예: 아카이빙, 백업)이 중요할 때.
  * 특정 쿼리 패턴(예: 날짜별 조회)이 명확한 경우.
  * 예: 주문 데이터가 날짜별로 조회되며, 서버 확장이 불필요한 전자상거래 시스템.
* **샤딩 선택 기준**:
  * 대규모 트래픽으로 수평 확장이 필요한 경우(예: 글로벌 SNS).
  * 데이터 분산으로 병렬 처리 성능을 극대화해야 할 때.
  * 샤드별 독립적 운영(장애 격리)이 중요한 경우.
  * 예: 사용자 데이터가 지역별로 분산 저장되는 소셜 미디어 플랫폼.
* **공통 고려사항**:
  * **데이터 분포**: 파티션/샤드 키 선택으로 데이터 불균형 방지.
  * **쿼리 패턴**: 조인 빈도와 데이터 접근 패턴 분석.
  * **운영 복잡성**: 파티셔닝은 구현이 간단, 샤딩은 인프라 관리 부담 증가.
  * **확장 계획**: 미래 트래픽 증가를 고려한 설계.

시스템의 트래픽 규모, 쿼리 특성, 운영 자원을 종합적으로 분석해 적절한 전략을 선택해야 합니다.
